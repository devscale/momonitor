{% extends "base.html" %}
{% load momonitor_tags %}

{% block body %}
<div class="page-header">
  <h1>All Services</h1>
</div>
<a id="add-service-button" href="{% url main_modal_form 'service' %}" role="button" class="btn modalize pull-right"><i class="icon-plus"></i></a>
<p class="clearfix"></p>
<table class="table table-hover table-bordered">
  <thead>
    <th>Service Name</th>
    <th>P/F/U</th>
    <th>Pagerduty Enabled</th>
    <th>Last Updated</th>
  </thead>
  <tbody>
    {% if services %}
    {% for service in services %}
    <tr class="{{service.status|to_bootstrap_rowclass}}">
      <td width="40%"><a href="{% url main_service service.id %}">{{service.name}} {% if check.silenced or service.silenced %}<small class="muted">silenced</small>{% endif %}</a>
	<a class="modalize" href="{% url main_modal_form 'service' service.id %}">
	  <i class="icon-edit"></i>
	</a>
	<a class="delete" href="{{service|resource_url}}">
	  <i class="icon-remove"></i>
	</a>
      </td>
      <td width="10%">{{service.all_counts}}</td>
      <td width="20%">{% if service.pagerduty_key %}True {% else %} False {% endif %}</td>
      <td width="30%">{{service.last_updated|since}}</td>
    </tr>
    {% endfor %}
    {% else %}
    <tr>
      <td colspan="4">
	<center class="muted">You don't have any services. Click <a href="{% url main_modal_form 'service' %}" class="modalize">here</a> to create one</center>
      </td>
    </tr>
    {% endif %}
  </tbody>
</table>
{% endblock %}
